\documentclass[12pt,a4paper,%
%draft%
]{scrreprt}
% prevent warning \float@addtolists detected
\usepackage{scrhack} 

% Textkodierung Deutsch
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{xspace}
\usepackage{microtype}

% Basisinfos
\title{Modellbasierte Testautomatisierung eines verteilen, adaptiven Load-Balancing-Systems}
\author{Gerald Siegert}
\date{\today}
\input{./settings/variablen}
\input{./settings/trennung}

% Seitenränder
\usepackage{geometry}
\geometry{left=35mm,right=20mm,top=25mm,bottom=20mm}

% Kopf/Fußzeilen
\usepackage[headsepline]{scrlayer-scrpage}
\clearscrheadfoot
\pagestyle{scrheadings}

\ihead{\headmark}
\automark{chapter}
\ohead{\pagemark}

\renewcommand*{\headfont}{\normalfont}
\setlength{\headheight}{1.5\baselineskip}
\renewcommand*{\chapterpagestyle}{scrheadings}

\newpairofpagestyles[scrheadings]{lists}{%
    \ihead{Verzeichnisse}%
    }

% Grafiken
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage[format=plain]{caption}
\setkeys{Gin}{width=0.8\columnwidth} % default width
 
% Tabellen
\usepackage{multirow}

% Textfarben
\usepackage{xcolor}

% Abkürzungen
\usepackage[nohyperlinks,printonlyused]{acronym}

% Zeilenabstand
\usepackage[onehalfspacing]{setspace}
\usepackage{enumitem}
\setlist[itemize]{noitemsep} % noitemsep bei listen
\renewcommand*{\chapterheadstartvskip}{\vspace*{.5\baselineskip}}% Abstand vor Kapiteltitel

% Literatur
\usepackage[style=numeric-comp,natbib=true,maxitems=1,backend=biber,sorting=none]{biblatex}
\usepackage{csquotes}
\addbibresource{./literatur.bib}
\addbibresource{./web.bib}
\addbibresource{./abbildungen.bib}
% Zeilenumbrüche bei URLs
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}

% Listings
\usepackage{listings}
\makeatletter
\definecolor{bluekeywords}{rgb}{0.13,0.13,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.9,0,0}
\definecolor{typeidentifier}{RGB}{38, 121,	153}
\lstdefinestyle{base}{
    basicstyle=\footnotesize\ttfamily,
    frame=single,
    numbers=left,
    numberstyle=\tiny,
    numbersep=7pt,
    breaklines=true,
    tabsize=3,
    captionpos=b,
    extendedchars=true,
    showstringspaces=false,
}
\lstdefinestyle{cs}{
    language=[sharp]c,
    style=base,
    escapeinside={(*@}{@*)},
    morekeywords={get,set,var,nameof},
    moredelim=[is][\color{typeidentifier}]{|}{|},
    commentstyle=\color{greencomments},
    keywordstyle=\color{bluekeywords}\bfseries,
    stringstyle=\color{redstrings},
}
\lstdefinestyle{plain}{
    language={},
    style=base,
    tabsize=4,
    captionpos=t,
}
% Json Listings
\newcommand\JSONnumbervaluestyle{\color{blue}}
\newcommand\JSONstringvaluestyle{\color{red}}
% switch used as state variable
\newif\ifcolonfoundonthisline
\lstdefinestyle{json}
{
    style=base,
    captionpos=t,
    showstringspaces    = false,
    keywords            = {false,true},
    alsoletter          = 0123456789.,
    morestring          = [s]{"}{"},
    stringstyle         = \ifcolonfoundonthisline\JSONstringvaluestyle\fi,
    MoreSelectCharTable =%
    \lst@DefSaveDef{`:}\colon@json{\processColon@json},
    basicstyle          = \ttfamily,
    keywordstyle        = \ttfamily\bfseries,
}
% flip the switch if a colon is found in Pmode
\newcommand\processColon@json{%
    \colon@json%
    \ifnum\lst@mode=\lst@Pmode%
    \global\colonfoundonthislinetrue%
    \fi
}
\lst@AddToHook{Output}{%
    \ifcolonfoundonthisline%
    \ifnum\lst@mode=\lst@Pmode%
    \def\lst@thestyle{\JSONnumbervaluestyle}%
    \fi
    \fi
    %override by keyword style if a keyword is detected!
    \lsthk@DetectKeywords% 
}
% reset the switch at the end of line
\lst@AddToHook{EOL}%
{\global\colonfoundonthislinefalse}
%%%%%%%%%% end listings

\makeatletter

% Default centering floatboxes
\g@addto@macro\@floatboxreset\centering

% Verzeichnisse
\renewcommand\listoffigures{%
    \addsec{\listfigurename}%
    \@mkboth{\MakeUppercase\listfigurename}%
    {\listfigurename}%
    \@starttoc{lof}%
}
\renewcommand\listoftables{%
    \addsec{\listtablename}%
    \@mkboth{\MakeUppercase\listtablename}%
    {\listtablename}%
    \@starttoc{lot}%
}
\renewcommand\lstlistoflistings{%
    \addsec{\lstlistlistingname}%
    \@mkboth{\MakeUppercase\lstlistlistingname}%
    {\lstlistlistingname}%
    \@starttoc{lol}%
}

\makeatother

% Hurenkinder, Schusterjungen
\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty = 10000 

% Referenzen
\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}

\usepackage{todonotes}
\presetkeys{todonotes}{inline}{}

\begin{document}
    % Titelseite
    \setcounter{page}{-100}
    \begin{titlepage}
        \begin{doublespace}
            \include{./settings/deckblatt}
        \end{doublespace}
    \end{titlepage}
    
    % Abstract
    \pagenumbering{Roman}
    \include{./abstract}
    
    % Verzeichnisse
    \pagestyle{lists}
    \newpage
    \begin{singlespace}
        \tableofcontents
        \include{./settings/verzeichnisse}
    \end{singlespace}
    
    % Inhalt
    \pagestyle{scrheadings}
    \newpage
    \pagenumbering{arabic}
    
    \include{./einleitung/einleitung}
    %\include{./methodik/methodik}
    \include{./fallstudie/fallstudie}
    \include{./modell/modell}
    \include{./benchmarks/benchmarks}
    \include{./ausfuehrung/ausfuehrung}
    
    % Literatur
    \newpage
    \begin{singlespace}
        \addcontentsline{toc}{chapter}{Literatur}
        \renewcommand\refname{Literatur}
        \printbibliography
    \end{singlespace}
    
    % Anhang
    \newpage
    \appendix
    \input{./anhang/anhang}
\end{document}